---
// Component Imports
import BaseHead from '../components/BaseHead.astro';
import BlogHeader from '../components/BlogHeader.astro';
import { SITE } from '../config';

// Component Script:
// You can write any JavaScript/TypeScript that you'd like here.
// It will run during the build, but never in the browser.
// All variables are available to use in the HTML template below.
let { title } = SITE;
let description = 'Specializing in high growth disruptive technologies';
let permalink = 'https://example.com/'; // ADD URL HERE

// Data Fetching: List all Markdown posts in the repo.

let allPosts = await Astro.glob('./posts/*.md');
allPosts = allPosts.sort((a, b) => new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf());

---
<html lang="en">
	<head>
		<BaseHead {title} {description} {permalink} />

		<style>
			.content {
				height: 100vh;
			}

			.title {
				margin-top: -8rem;
				text-align: center;
			}

			.main-heading {
				font-size: 6rem;
				font-weight: 700;
				margin-bottom: -0.5rem;
			}

			.main-bio {
				font-size: 1rem;
				margin-bottom: 2rem;
			}

			.svg {
				margin-top: 1.5rem;
       			width: 100%;
        		height: 600px;
      		}
			.main-room, .blue-room, .pink-room {
				fill: black;
				opacity: 0.5;
				stroke: transparent;
				pointer-events: all;
			}
			.main-room:hover, .blue-room:hover, .pink-room:hover {
				transition: ease 0.15s;
				opacity: 1;
				fill: none;
				stroke-width: 3px;
			}
			.main-room:hover {
				stroke: #73bed3;
			}

			.blue-room:hover {
				stroke: #a4dddb;

			} 
			.pink-room:hover {
				stroke: #df84a5;

			}
			.main-room-div-right {
				display: none;
				width: 20rem;
				position: absolute;
				margin-top: 5.5rem;
				transform: translateX(-3rem);
			}
			.popup-title {
				text-decoration: underline;
				font-size: 4.5rem;
				color: var(--color-blue);
			}
			.popup-text {
				font-size: 0.8rem;
				margin-top: 9rem;
			}
			.main-room-div-left {
				display: none;
				width: 18rem;
				position: absolute;
				z-index: 1;
				top: 18rem;
				left: 2rem;
			}
			.pink-room-popup {
				display: none;
				position: absolute;
				top: 25rem;
				left: 2rem;
			}
			.blue-room-popup {
				display: none;
				position: absolute;
				z-index: 1;
				top: 40rem;
				right: 5rem;
			}
			.blue-room-popup-left {
				display: none;
				position: absolute;
				z-index: 1;
				top: 20rem;
				left: 6rem;
			}

			.references {
				position: absolute;
				height: 20rem;
				width: 100%;
				bottom: 0;
				transform: translateY(14rem);
				background-color: #090a14;
			}


		</style>
	</head>

	<body>
		<BlogHeader />
		<div class="wrapper">
			<main class="content">
					<div class="title">
						<h1 class="main-heading">THE DECENTRALAWYER</h1>
						<p class="main-bio">{description}</p>
					</div>

					<!-- svg integration -->
						<figure class="figure">
						  <svg
							class="svg"
							viewBox="0 0 1500 1200"
							preserveAspectRatio="xMinYMin meet"
						  >
							<image
							  class="img"
							  xlink:href="/public/assets/DecentralawyerOfficeMain_smaller.png"
							/>
				  
							<g class="hover-group">
							  <polygon
								class="main-room"
								points="200, 275 745, 0 1340, 295 1340, 450 948, 647"
							  />
							</g>
							<g class="hover-group">
							  <polygon
								class="blue-room"
								points="320, 840 320, 685 672, 511 1010, 678 1010, 830 660, 1005"
							  />
							</g>
							<g class="hover-group">
							  <polygon
								class="pink-room"
								points="320, 840 320, 685 672, 510 380, 365 0, 550 0, 680  "
							  />
							</g>
						  </svg>
						  <div class="main-room-div-right">
							<h1 class="popup-title">Skills</h1>
							<p class="popup-text">We specialize in providing cutting-edge solutions for high growth disruptive technologies. Our team of experts is dedicated to helping our clients stay ahead of the curve and achieve their business goals</p>
						  </div>
						  <div class="main-room-div-left">
							<p>If you are facing legal issues, Decentralawyer is here to help. Our attorneys have a wealth of knowledge in [practice areas] and will work tirelessly to ensure that your rights are protected
							</p>
						  </div>

						  <div class="pink-room-popup">
							<h1>Contact</h1>
							<p>Email: email@email.com</p>
							<p>Contact me here!</p>
						  </div>

						  <div class="blue-room-popup">
							<h1>Bio</h1>
							<p>La Di Da Di We Like To Party</p>
						  </div>
						  <div class="blue-room-popup-left">
							<p>This is placeholder text</p>
						  </div>
						</figure>

					  <!-- svg integration end -->
					  <div class="references"></div>
			</main>
		</div>
		<script>
			// defines html elements as variables
			var mainRoom = document.querySelector(".main-room");
			var mainRoomPopup = document.querySelectorAll(".main-room-div-right, .main-room-div-left");
			
			// pink-room variable definitions
			var pinkRoom = document.querySelector(".pink-room");
			var pinkRoomPopup = document.querySelector(".pink-room-popup")

			var blueRoom = document.querySelector(".blue-room");
			var blueRoomPopup = document.querySelectorAll(".blue-room-popup, .blue-room-popup-left")

			// selects the elements and listens for hover motions
			mainRoom.addEventListener("mouseover", function() {
				showPopup(mainRoom, mainRoomPopup);
			});
			mainRoom.addEventListener("mouseout", function() {
				hidePopup(mainRoomPopup);
			});

			blueRoom.addEventListener("mouseover", function() {
				showPopup(blueRoom, blueRoomPopup);
			});
			blueRoom.addEventListener("mouseout", function() {
				hidePopup(blueRoomPopup);
			});

			pinkRoom.addEventListener("mouseover", function() {
				showPopup(pinkRoom, pinkRoomPopup);
			});
			pinkRoom.addEventListener("mouseout", function() {
				hidePopup(pinkRoomPopup);
			});
						
			// function to show the popup
			function showPopup(room, popup) {
				var iconPos = room.getBoundingClientRect();
				if (popup instanceof NodeList) {
					for (let i = 0; i < popup.length; i++) {
					var popupElem = popup[i];
					if (i === 0) {
						// positioning styles for first instance of mainRoomPopup
						popupElem.style.left = iconPos.right + 20 + "px";
						popupElem.style.top = window.scrollY + iconPos.top - 60 + "px";
					}
					popupElem.style.display = "block";
					}
				} else {
					// popup.style.left = iconPos.right + 20 + "px";
					// popup.style.top = window.scrollY + iconPos.top - 60 + "px";
					popup.style.display = "block";
				}
				}

				function hidePopup(popup) {
					if (popup instanceof NodeList) {
						for (let i = 0; i < popup.length; i++) {
							popup[i].style.display = "none";
						}
					} else {
    					popup.style.display = "none";
					}
				}


		</script>
	</body>
</html>
